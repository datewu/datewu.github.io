<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="如何区分宿主机上的进程和容器上的进程"><title>容器PID</title><link rel=canonical href=https://tab.deoops.com/posts/container-pid/><link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="容器PID"><meta property="og:description" content="如何区分宿主机上的进程和容器上的进程"><meta property="og:url" content="https://tab.deoops.com/posts/container-pid/"><meta property="og:site_name" content="鬼画桃符"><meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:tag" content="cgroup"><meta property="article:tag" content="linux"><meta property="article:tag" content="proc"><meta property="article:tag" content="matrix"><meta property="article:published_time" content="2020-03-13T22:43:32+08:00"><meta property="article:modified_time" content="2020-03-13T22:43:32+08:00"><meta property="og:image" content="https://tab.deoops.com/posts/container-pid/the-matrix.jpeg"><meta name=twitter:title content="容器PID"><meta name=twitter:description content="如何区分宿主机上的进程和容器上的进程"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://tab.deoops.com/posts/container-pid/the-matrix.jpeg"></head><body class="article-page has-toc"><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex
extended"><div id=article-toolbar><a href=/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>返回</span></a></div><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/posts/container-pid/><img src=/posts/container-pid/the-matrix_huca438541ad881ab92ee8c66601a20268_121541_800x0_resize_q75_box.jpeg srcset="/posts/container-pid/the-matrix_huca438541ad881ab92ee8c66601a20268_121541_800x0_resize_q75_box.jpeg 800w, /posts/container-pid/the-matrix_huca438541ad881ab92ee8c66601a20268_121541_1600x0_resize_q75_box.jpeg 1600w" width=800 height=450 loading=lazy alt="Featured image of post 容器PID"></a></div><div class=article-details><header class=article-category><a href=/categories/%E8%BF%90%E7%BB%B4/ style=background-color:#2a9d8f;color:#fff>运维</a></header><h2 class=article-title><a href=/posts/container-pid/>容器PID</a></h2><h3 class=article-subtitle>如何区分宿主机上的进程和容器上的进程</h3><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Mar 13, 2020</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>阅读时长: 2 分钟</time></div></footer></div></header><section class=article-content><p>架构部的同事问了我两个问题:</p><ol><li>宿主机上有个进程很耗 cpu，怎么判断它是不是某个容器的进程;</li><li>如果它是跑在容器里，怎么查到是哪个容器(container id);</li></ol><h2 id=解决方案>解决方案</h2><p>有两种方法来解决上面两个问题：</p><h3 id=cgroup>cgroup</h3><p>通过查看pid的cgroup是否含有 <code>slice</code>信息来判断是否是容器进程:</p><h4 id=主机进程-cgroup>主机进程 cgroup</h4><p>直接运行在宿主机主的进程的cgroup是没有<code>slice</code>信息的：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@deoops ~<span class=o>]</span><span class=c1># cat /proc/1/cgroup</span>
</span></span><span class=line><span class=cl>11:perf_event:/
</span></span><span class=line><span class=cl>10:memory:/
</span></span><span class=line><span class=cl>9:devices:/
</span></span><span class=line><span class=cl>8:cpuacct,cpu:/
</span></span><span class=line><span class=cl>7:cpuset:/
</span></span><span class=line><span class=cl>6:hugetlb:/
</span></span><span class=line><span class=cl>5:blkio:/
</span></span><span class=line><span class=cl>4:net_prio,net_cls:/
</span></span><span class=line><span class=cl>3:freezer:/
</span></span><span class=line><span class=cl>2:pids:/
</span></span><span class=line><span class=cl>1:name<span class=o>=</span>systemd:/
</span></span><span class=line><span class=cl><span class=o>[</span>root@deoops ~<span class=o>]</span><span class=c1># cat /proc/19/cgroup</span>
</span></span><span class=line><span class=cl>11:perf_event:/
</span></span><span class=line><span class=cl>10:memory:/
</span></span><span class=line><span class=cl>9:devices:/
</span></span><span class=line><span class=cl>8:cpuacct,cpu:/
</span></span><span class=line><span class=cl>7:cpuset:/
</span></span><span class=line><span class=cl>6:hugetlb:/
</span></span><span class=line><span class=cl>5:blkio:/
</span></span><span class=line><span class=cl>4:net_prio,net_cls:/
</span></span><span class=line><span class=cl>3:freezer:/
</span></span><span class=line><span class=cl>2:pids:/
</span></span><span class=line><span class=cl>1:name<span class=o>=</span>systemd:/
</span></span></code></pre></div><h4 id=k8s-pod进程-cgroup>k8s pod进程 cgroup</h4><p>在宿主机上看跑在容器进程的cgroup是可以看到<code>slice</code>信息的：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@deoops ~<span class=o>]</span><span class=c1># cat /proc/20397/cgroup</span>
</span></span><span class=line><span class=cl>11:perf_event:/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod6d62265d_cd4d_4807_8d2f_386714d5bbdc.slice/docker-c44a782ba5482052e66dc3f5ed3811e2a699db09b6715e26102d582a51ac52cc.scope
</span></span><span class=line><span class=cl>10:memory:/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod6d62265d_cd4d_4807_8d2f_386714d5bbdc.slice/docker-c44a782ba5482052e66dc3f5ed3811e2a699db09b6715e26102d582a51ac52cc.scope
</span></span><span class=line><span class=cl>9:devices:/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod6d62265d_cd4d_4807_8d2f_386714d5bbdc.slice/docker-c44a782ba5482052e66dc3f5ed3811e2a699db09b6715e26102d582a51ac52cc.scope
</span></span><span class=line><span class=cl>8:cpuacct,cpu:/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod6d62265d_cd4d_4807_8d2f_386714d5bbdc.slice/docker-c44a782ba5482052e66dc3f5ed3811e2a699db09b6715e26102d582a51ac52cc.scope
</span></span><span class=line><span class=cl>7:cpuset:/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod6d62265d_cd4d_4807_8d2f_386714d5bbdc.slice/docker-c44a782ba5482052e66dc3f5ed3811e2a699db09b6715e26102d582a51ac52cc.scope
</span></span><span class=line><span class=cl>6:hugetlb:/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod6d62265d_cd4d_4807_8d2f_386714d5bbdc.slice/docker-c44a782ba5482052e66dc3f5ed3811e2a699db09b6715e26102d582a51ac52cc.scope
</span></span><span class=line><span class=cl>5:blkio:/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod6d62265d_cd4d_4807_8d2f_386714d5bbdc.slice/docker-c44a782ba5482052e66dc3f5ed3811e2a699db09b6715e26102d582a51ac52cc.scope
</span></span><span class=line><span class=cl>4:net_prio,net_cls:/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod6d62265d_cd4d_4807_8d2f_386714d5bbdc.slice/docker-c44a782ba5482052e66dc3f5ed3811e2a699db09b6715e26102d582a51ac52cc.scope
</span></span><span class=line><span class=cl>3:freezer:/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod6d62265d_cd4d_4807_8d2f_386714d5bbdc.slice/docker-c44a782ba5482052e66dc3f5ed3811e2a699db09b6715e26102d582a51ac52cc.scope
</span></span><span class=line><span class=cl>2:pids:/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod6d62265d_cd4d_4807_8d2f_386714d5bbdc.slice/docker-c44a782ba5482052e66dc3f5ed3811e2a699db09b6715e26102d582a51ac52cc.scope
</span></span><span class=line><span class=cl>1:name<span class=o>=</span>systemd:/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod6d62265d_cd4d_4807_8d2f_386714d5bbdc.slice/docker-c44a782ba5482052e66dc3f5ed3811e2a699db09b6715e26102d582a51ac52cc.scope
</span></span></code></pre></div><p>从上面的输出可以看到 pid <code>20397</code>是 kubernets pod拉起来的进程， 而且<code>pod ID</code> 是：
<code>6d62265d_cd4d_4807_8d2f_386714d5bbdc</code>, 对应的 <code>contariner ID</code> 是
<code>c44a782ba5482052e66dc3f5ed3811e2a699db09b6715e26102d582a51ac52cc</code></p><h4 id=docker-container进程-cgroup>docker container进程 cgroup</h4><p>docker containre 和 k8s 一样，也会设置cgroup slice：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@deoops ~<span class=o>]</span><span class=c1># docker run --name mysql  -p 3306:3306  -e MYSQL_ROOT_PASSWORD=super123456secret -d mysql:5.7.28</span>
</span></span><span class=line><span class=cl>Unable to find image <span class=s1>&#39;mysql:5.7.28&#39;</span> locally
</span></span><span class=line><span class=cl>5.7.28: Pulling from library/mysql
</span></span><span class=line><span class=cl>804555ee0376: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>c53bab458734: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>ca9d72777f90: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>2d7aad6cb96e: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>8d6ca35c7908: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>6ddae009e760: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>327ae67bbe7b: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>31f1f8385b27: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>a5a3ad97e819: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>48bede7828ac: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>380afa2e6973: Pull <span class=nb>complete</span>
</span></span><span class=line><span class=cl>Digest: sha256:b38555e593300df225daea22aeb104eed79fc80d2f064fde1e16e1804d00d0fc
</span></span><span class=line><span class=cl>Status: Downloaded newer image <span class=k>for</span> mysql:5.7.28
</span></span><span class=line><span class=cl>771aa2fdc8cae66a0cb05a4585beff44a69f0f1c5b2a21fd159cbeea0a86d633
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>root@deoops ~<span class=o>]</span><span class=c1># ps aux | grep mysql</span>
</span></span><span class=line><span class=cl>polkitd  <span class=m>23855</span>  3.0  1.1 <span class=m>1007636</span> <span class=m>190588</span> ?      Ssl  09:39   0:00 mysqld
</span></span><span class=line><span class=cl>root     <span class=m>24176</span>  0.0  0.0 <span class=m>112724</span>   <span class=m>984</span> pts/0    S+   09:39   0:00 grep --color<span class=o>=</span>auto mysql
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>root@deoops ~<span class=o>]</span><span class=c1># cat /proc/23855/cgroup</span>
</span></span><span class=line><span class=cl>11:perf_event:/system.slice/docker-771aa2fdc8cae66a0cb05a4585beff44a69f0f1c5b2a21fd159cbeea0a86d633.scope
</span></span><span class=line><span class=cl>10:memory:/system.slice/docker-771aa2fdc8cae66a0cb05a4585beff44a69f0f1c5b2a21fd159cbeea0a86d633.scope
</span></span><span class=line><span class=cl>9:devices:/system.slice/docker-771aa2fdc8cae66a0cb05a4585beff44a69f0f1c5b2a21fd159cbeea0a86d633.scope
</span></span><span class=line><span class=cl>8:cpuacct,cpu:/system.slice/docker-771aa2fdc8cae66a0cb05a4585beff44a69f0f1c5b2a21fd159cbeea0a86d633.scope
</span></span><span class=line><span class=cl>7:cpuset:/system.slice/docker-771aa2fdc8cae66a0cb05a4585beff44a69f0f1c5b2a21fd159cbeea0a86d633.scope
</span></span><span class=line><span class=cl>6:hugetlb:/system.slice/docker-771aa2fdc8cae66a0cb05a4585beff44a69f0f1c5b2a21fd159cbeea0a86d633.scope
</span></span><span class=line><span class=cl>5:blkio:/system.slice/docker-771aa2fdc8cae66a0cb05a4585beff44a69f0f1c5b2a21fd159cbeea0a86d633.scope
</span></span><span class=line><span class=cl>4:net_prio,net_cls:/system.slice/docker-771aa2fdc8cae66a0cb05a4585beff44a69f0f1c5b2a21fd159cbeea0a86d633.scope
</span></span><span class=line><span class=cl>3:freezer:/system.slice/docker-771aa2fdc8cae66a0cb05a4585beff44a69f0f1c5b2a21fd159cbeea0a86d633.scope
</span></span><span class=line><span class=cl>2:pids:/system.slice/docker-771aa2fdc8cae66a0cb05a4585beff44a69f0f1c5b2a21fd159cbeea0a86d633.scope
</span></span><span class=line><span class=cl>1:name<span class=o>=</span>systemd:/system.slice/docker-771aa2fdc8cae66a0cb05a4585beff44a69f0f1c5b2a21fd159cbeea0a86d633.scope
</span></span><span class=line><span class=cl><span class=o>[</span>root@deoops ~<span class=o>]</span><span class=c1># docker ps | grep 771aa2fdc</span>
</span></span><span class=line><span class=cl>771aa2fdc8ca        mysql:5.7.28                                                        <span class=s2>&#34;docker-entrypoint.s…&#34;</span>    <span class=m>58</span> seconds ago      Up <span class=m>57</span> seconds       0.0.0.0:3306-&gt;3306/tcp, 33060/tcp   mysql
</span></span></code></pre></div><p>从上面bash脚本的输出可以清楚的看到，cgroup配置的<code>container ID</code> 和 docker ps 命令输出的 <code>container ID</code>是一样的，都是 <code>771aa2fdc8ca</code></p><h3 id=ppid>ppid</h3><p>下面两种方法和docker强相关，不推荐。</p><h4 id=pstree>pstree</h4><p>老老实实的一步步排查主机上所有的container ppid：
用 <code>pstree</code>命令查看宿主机上的进程树，看<code>&lt;pid></code> 是不是<code>docker-current</code>创建的子进程;</p><h4 id=docker-inspect>docker inspect</h4><p>使用<code>docker inspect</code>命令查询所有容器的pid，然后做过滤，找到该进程对应的容器名，id，容器的详细信息中，包含了它在宿主机上的进程号。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker inspect -f <span class=s2>&#34;{{.Id}} {{.State.Pid}} {{.Config.Hostname}}&#34;</span>  <span class=k>$(</span>docker ps -q<span class=k>)</span> <span class=p>|</span> grep &lt;pid&gt;
</span></span></code></pre></div><h2 id=发散思维>发散思维</h2><h3 id=matrix>MATRIX</h3><p>那么进程自己如何判断自己是否在container中呢？</p><p>答案很简单，如果 <code>pid 1</code> 的cgroup有slice信息，说明进程现在在容器中，否则则说明不在容器里。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>root@deoops ~<span class=o>]</span><span class=c1># kubectl exec -it binary-controller-7dfd4bbd6f-6hsvd sh</span>
</span></span><span class=line><span class=cl>/ <span class=c1># ps</span>
</span></span><span class=line><span class=cl>PID   USER     TIME  COMMAND
</span></span><span class=line><span class=cl>    <span class=m>1</span> root      0:30 /binary-controller -kubeconfig<span class=o>=</span>inCluster -mode<span class=o>=</span>prodution
</span></span><span class=line><span class=cl>  <span class=m>196</span> root      0:00 sh
</span></span><span class=line><span class=cl>  <span class=m>202</span> root      0:00 ps
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ <span class=c1># cat /proc/1/cgroup </span>
</span></span><span class=line><span class=cl>11:hugetlb:/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod482f0a01_7b3e_48cd_adb6_61c9097b43a4.slice/docker-b3079dba7a1cf909631c2f9e8ad38cc7f193e6ba8fe649d4d6f590a7d11b0509.scope
</span></span><span class=line><span class=cl>10:pids:/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod482f0a01_7b3e_48cd_adb6_61c9097b43a4.slice/docker-b3079dba7a1cf909631c2f9e8ad38cc7f193e6ba8fe649d4d6f590a7d11b0509.scope
</span></span><span class=line><span class=cl>9:perf_event:/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod482f0a01_7b3e_48cd_adb6_61c9097b43a4.slice/docker-b3079dba7a1cf909631c2f9e8ad38cc7f193e6ba8fe649d4d6f590a7d11b0509.scope
</span></span><span class=line><span class=cl>8:freezer:/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod482f0a01_7b3e_48cd_adb6_61c9097b43a4.slice/docker-b3079dba7a1cf909631c2f9e8ad38cc7f193e6ba8fe649d4d6f590a7d11b0509.scope
</span></span><span class=line><span class=cl>7:memory:/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod482f0a01_7b3e_48cd_adb6_61c9097b43a4.slice/docker-b3079dba7a1cf909631c2f9e8ad38cc7f193e6ba8fe649d4d6f590a7d11b0509.scope
</span></span><span class=line><span class=cl>6:net_prio,net_cls:/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod482f0a01_7b3e_48cd_adb6_61c9097b43a4.slice/docker-b3079dba7a1cf909631c2f9e8ad38cc7f193e6ba8fe649d4d6f590a7d11b0509.scope
</span></span><span class=line><span class=cl>5:blkio:/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod482f0a01_7b3e_48cd_adb6_61c9097b43a4.slice/docker-b3079dba7a1cf909631c2f9e8ad38cc7f193e6ba8fe649d4d6f590a7d11b0509.scope
</span></span><span class=line><span class=cl>4:cpuacct,cpu:/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod482f0a01_7b3e_48cd_adb6_61c9097b43a4.slice/docker-b3079dba7a1cf909631c2f9e8ad38cc7f193e6ba8fe649d4d6f590a7d11b0509.scope
</span></span><span class=line><span class=cl>3:devices:/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod482f0a01_7b3e_48cd_adb6_61c9097b43a4.slice/docker-b3079dba7a1cf909631c2f9e8ad38cc7f193e6ba8fe649d4d6f590a7d11b0509.scope
</span></span><span class=line><span class=cl>2:cpuset:/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod482f0a01_7b3e_48cd_adb6_61c9097b43a4.slice/docker-b3079dba7a1cf909631c2f9e8ad38cc7f193e6ba8fe649d4d6f590a7d11b0509.scope
</span></span><span class=line><span class=cl>1:name<span class=o>=</span>systemd:/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-pod482f0a01_7b3e_48cd_adb6_61c9097b43a4.slice/docker-b3079dba7a1cf909631c2f9e8ad38cc7f193e6ba8fe649d4d6f590a7d11b0509.scope
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## OH NO, I&#39;M IN THE MATRIX</span>
</span></span></code></pre></div></section><footer class=article-footer><section class=article-tags><a href=/tags/cgroup/>cgroup</a>
<a href=/tags/linux/>linux</a>
<a href=/tags/proc/>proc</a>
<a href=/tags/matrix/>matrix</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>相关文章</h2><div class=related-contents><div class="flex article-list--tile"><article class=has-image><a href=/posts/socat-usage/><div class=article-image><img src=/posts/socat-usage/socat.b7710d19548d0dfc292db2cfd5b841b6_hu03f89a710279d4dc3ef9b7f10baa691c_127416_250x150_fill_q75_box_smart1.jpeg width=250 height=150 loading=lazy data-key data-hash="md5-t3ENGVSNDfwpLbLP1bhBtg=="></div><div class=article-details><h2 class=article-title>socat工具</h2></div></a></article><article class=has-image><a href=/posts/load-disk/><div class=article-image><img src=/posts/load-disk/disk.3c0ca4b5069b024bc52128389c9efda1_huc96de7ee3c2e159b1393298e71eecb80_142875_250x150_fill_q75_box_smart1.jpeg width=250 height=150 loading=lazy data-key data-hash="md5-PAyktQabAkvFISg4nJ79oQ=="></div><div class=article-details><h2 class=article-title>挂载硬盘</h2></div></a></article><article class=has-image><a href=/posts/systemd-conf/><div class=article-image><img src=/posts/systemd-conf/Systemd_components.svg loading=lazy data-key data-hash=/posts/systemd-conf/Systemd_components.svg></div><div class=article-details><h2 class=article-title>Systemd配置问题</h2></div></a></article><article class=has-image><a href=/posts/macvlan-busy/><div class=article-image><img src=/posts/macvlan-busy/maxresdefault.950f254caf2f9e23db9a50f2c7f00747_hu0c8b163f503b127644f51a05a3769b8d_73452_250x150_fill_q75_box_smart1.jpeg width=250 height=150 loading=lazy data-key data-hash="md5-lQ8lTK8vniPbmlDyx/AHRw=="></div><div class=article-details><h2 class=article-title>无法创建macvlan设备</h2></div></a></article><article class=has-image><a href=/posts/tcp-tune/><div class=article-image><img src=/posts/tcp-tune/sysctl.0086a186d14416c738a025951ff2aa1a_hue759758d58191cbb59e001a219022668_168191_250x150_fill_q75_box_smart1.jpeg width=250 height=150 loading=lazy data-key data-hash="md5-AIahhtFEFsc4oCWVH/KqGg=="></div><div class=article-details><h2 class=article-title>tcp性能调优</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2006 -
2023 鬼画桃符</section><section class=powerby>豆腐炒糖</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#解决方案>解决方案</a><ol><li><a href=#cgroup>cgroup</a><ol><li><a href=#主机进程-cgroup>主机进程 cgroup</a></li><li><a href=#k8s-pod进程-cgroup>k8s pod进程 cgroup</a></li><li><a href=#docker-container进程-cgroup>docker container进程 cgroup</a></li></ol></li><li><a href=#ppid>ppid</a><ol><li><a href=#pstree>pstree</a></li><li><a href=#docker-inspect>docker inspect</a></li></ol></li></ol></li><li><a href=#发散思维>发散思维</a><ol><li><a href=#matrix>MATRIX</a></li></ol></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>