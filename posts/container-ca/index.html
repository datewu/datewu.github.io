<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="å®¹å™¨å†…è¿›ç¨‹HTTP GETæŠ¥é”™"><title>è¯ä¹¦é—®é¢˜</title><link rel=canonical href=https://tab.deoops.com/posts/container-ca/><link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="è¯ä¹¦é—®é¢˜"><meta property="og:description" content="å®¹å™¨å†…è¿›ç¨‹HTTP GETæŠ¥é”™"><meta property="og:url" content="https://tab.deoops.com/posts/container-ca/"><meta property="og:site_name" content="é¬¼ç”»æ¡ƒç¬¦"><meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:tag" content="docker"><meta property="article:tag" content="certificate"><meta property="article:tag" content="https"><meta property="article:tag" content="x509"><meta property="article:published_time" content="2019-09-12T10:11:32+08:00"><meta property="article:modified_time" content="2019-09-12T10:11:32+08:00"><meta property="og:image" content="https://tab.deoops.com/posts/container-ca/common-ca.png"><meta name=twitter:title content="è¯ä¹¦é—®é¢˜"><meta name=twitter:description content="å®¹å™¨å†…è¿›ç¨‹HTTP GETæŠ¥é”™"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://tab.deoops.com/posts/container-ca/common-ca.png"></head><body class="article-page has-toc"><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex
extended"><div id=article-toolbar><a href=/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>è¿”å›</span></a></div><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/posts/container-ca/><img src=/posts/container-ca/common-ca_hu249b34a0b606f672af7bc796fcfc189a_82371_800x0_resize_box_3.png srcset="/posts/container-ca/common-ca_hu249b34a0b606f672af7bc796fcfc189a_82371_800x0_resize_box_3.png 800w, /posts/container-ca/common-ca_hu249b34a0b606f672af7bc796fcfc189a_82371_1600x0_resize_box_3.png 1600w" width=800 height=285 loading=lazy alt="Featured image of post è¯ä¹¦é—®é¢˜"></a></div><div class=article-details><header class=article-category><a href=/categories/%E8%BF%90%E7%BB%B4/ style=background-color:#2a9d8f;color:#fff>è¿ç»´</a>
<a href=/categories/%E7%94%9F%E6%B4%BB/ style=background-color:#2a9d8f;color:#fff>ç”Ÿæ´»</a></header><h2 class=article-title><a href=/posts/container-ca/>è¯ä¹¦é—®é¢˜</a></h2><h3 class=article-subtitle>å®¹å™¨å†…è¿›ç¨‹HTTP GETæŠ¥é”™</h3><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Sep 12, 2019</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>é˜…è¯»æ—¶é•¿: 1 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><p><code>docker run</code>è°ƒè¯•æŸä¸ªcontaineræŠ¥å¦‚ä¸‹æ‰€ç¤º<code>x509</code>è¯ä¹¦é”™è¯¯ï¼Œä¸€å¼€å§‹æ€€ç–‘æ˜¯å®¹å™¨ç½‘ç»œï¼ˆ<code>--network host</code>) çš„é—®é¢˜ :</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>deoops@dev-3 ~<span class=o>]</span><span class=c1># docker run  --network host  datewu/controller:v0.0.2</span>
</span></span><span class=line><span class=cl><span class=o>{</span><span class=s2>&#34;level&#34;</span>:<span class=s2>&#34;panic&#34;</span>,<span class=s2>&#34;error&#34;</span>:<span class=s2>&#34;Get https://google.com: x509: certificate signed by unknown authority&#34;</span>,<span class=s2>&#34;time&#34;</span>:1555498448,<span class=s2>&#34;message&#34;</span>:<span class=s2>&#34;get max item failed&#34;</span><span class=o>}</span>
</span></span><span class=line><span class=cl>panic: get max item failed
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>goroutine <span class=m>26</span> <span class=o>[</span>running<span class=o>]</span>:
</span></span><span class=line><span class=cl>github.com/rs/zerolog.<span class=o>(</span>*Logger<span class=o>)</span>.Panic.func1<span class=o>(</span>0x7773e9, 0x13<span class=o>)</span>
</span></span><span class=line><span class=cl>        /Users/deoops/go/pkg/mod/github.com/rs/zerolog@v1.13.0/log.go:307 +0x4f
</span></span><span class=line><span class=cl>github.com/rs/zerolog.<span class=o>(</span>*Event<span class=o>)</span>.msg<span class=o>(</span>0xc00012e8a0, 0x7773e9, 0x13<span class=o>)</span>
</span></span><span class=line><span class=cl>        /Users/deoops/go/pkg/mod/github.com/rs/zerolog@v1.13.0/event.go:141 +0x1c1
</span></span><span class=line><span class=cl>github.com/rs/zerolog.<span class=o>(</span>*Event<span class=o>)</span>.Msg<span class=o>(</span>...<span class=o>)</span>
</span></span><span class=line><span class=cl>        /Users/deoops/go/pkg/mod/github.com/rs/zerolog@v1.13.0/event.go:105
</span></span><span class=line><span class=cl>main.catchUp<span class=o>()</span>
</span></span><span class=line><span class=cl>        /Users/deoops/github/controller/work.go:69 +0x326
</span></span><span class=line><span class=cl>main.populate<span class=o>(</span>0xc000114000<span class=o>)</span>
</span></span><span class=line><span class=cl>        /Users/deoops/github/controller/worker.go:10 +0x26
</span></span><span class=line><span class=cl>created by main.initWork
</span></span><span class=line><span class=cl>        /Users/deoops/github/controller/work.go:84 +0x7f
</span></span></code></pre></div><p>é”™è¯¯ä¿¡æ¯å¤§æ¦‚æ˜¯è¯´ client ä¸èƒ½è¯†åˆ«googleçš„https è¯ä¹¦ï¼Œ å¯èƒ½æ˜¯base image <code>alpine</code>çš„é—®é¢˜ã€‚</p><p>å°†<code>base image</code>æ”¹ä¸º <code>scratch</code> ï¼Œç»“æœè¿˜æ˜¯ä¼šæŠ¥<code>x509</code>é”™ã€‚</p><h2 id=è§£å†³æ–¹æ¡ˆ>è§£å†³æ–¹æ¡ˆ</h2><p>ç»™ <code>alpine</code>é•œåƒ <a class=link href=https://support.circleci.com/hc/en-us/articles/360016505753-Resolve-Certificate-Signed-By-Unknown-Authority-error-in-Alpine-images target=_blank rel=noopener>åŠ ä¸Šca-certificates</a>è§£å†³äº†é—®é¢˜:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-dockerfile data-lang=dockerfile><span class=line><span class=cl><span class=k>FROM</span><span class=s> alpine</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># add Common CA certificates PEM files</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=k>RUN</span> apk --no-cache add ca-certificates<span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># ....</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=c># docker build -t datewu/alpine-ca .</span><span class=err>
</span></span></span></code></pre></div><p>ä»¥åç”¨åˆ°<code>alpine</code>çš„Dockerfile ç›´æ¥ <code>FROM datewu/alpine-ca</code> é—®é¢˜è§£å†³å•¦ğŸ˜„</p><blockquote><p>æ€»ç»“ä¸€ä¸‹ï¼šå½“å®¹å™¨é‡Œçš„è¿›ç¨‹è®¿é—®å¤–éƒ¨tls serveræ—¶ï¼Œå¦‚æœå®¹å™¨å†…æ²¡æœ‰é…ç½®Common CA certificatesï¼Œå®¢æˆ·ç«¯å°±ä¼šå‡ºç°æ— æ³•è¯†åˆ«serverè¯ä¹¦çš„é—®é¢˜ã€‚</p></blockquote><p>ps:
ä»Šå¤©åœ¨å†™å­—æ¥¼äºŒæ¥¼å¿«é¤åº—åƒæ™šé¥­çš„æ—¶å€™ï¼Œé‡åˆ°ä¸¤ä¸ªå»ºç­‘å·¥äººï¼Œ50-60å²çš„æ ·å­ï¼Œåƒæ˜¯å¤«å¦»ã€‚</p><p>ä¸¤ä¸ªäººä¸€èµ·æ‰“æ‰åƒäº†10å—é’±ï¼šä¸€äººä¸€ä¸ªç´ èœï¼Œè±†èŠ½èœå’Œé»‘æ²¹ç™½ã€‚</p><p>ppsï¼šå¿«é¤åº—ä¸‹åˆçš„æ±¤æ˜¯å…è´¹çš„ï¼Œæ‰€ä»¥ä»–ä»¬ä¸€äººåˆæ‹¿äº†ä¸€ç¢—æ±¤ï¼Œ</p><p>å›æƒ³èµ·ä»Šå¤©æˆ‘è¿‡æ—©æ‰å°±åƒäº†10å—é’±ï¼Œå—Ÿä¹å”å˜˜ã€‚</p></section><footer class=article-footer><section class=article-tags><a href=/tags/docker/>docker</a>
<a href=/tags/certificate/>certificate</a>
<a href=/tags/https/>https</a>
<a href=/tags/x509/>x509</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-contents><div class="flex article-list--tile"><article class=has-image><a href=/posts/vscode-eslint/><div class=article-image><img src=/posts/vscode-eslint/eslint-airbnb.2f6cfa69959d62c46e4a9dc5039f8e50_hue35271ac4524df007877384f8b1c06a2_74499_250x150_fill_q75_box_smart1.jpeg width=250 height=150 loading=lazy data-key data-hash="md5-L2z6aZWdYsRuSp3FA5+OUA=="></div><div class=article-details><h2 class=article-title>é…ç½®vscode eslint</h2></div></a></article><article class=has-image><a href=/posts/pleg-unhealth/><div class=article-image><img src=/posts/pleg-unhealth/reboot.0136e79b6a1a6300e62958c6676a14a2_hu7bd3807bcb59ca2798687ce57e12416d_147938_250x150_fill_q75_box_smart1.jpeg width=250 height=150 loading=lazy data-key data-hash="md5-ATbnm2oaYwDmKVjGZ2oUog=="></div><div class=article-details><h2 class=article-title>podç”Ÿå‘½å‘¨æœŸäº‹ä»¶ç”Ÿæˆå™¨</h2></div></a></article><article class=has-image><a href=/posts/audit-file/><div class=article-image><img src=/posts/audit-file/audit.81b9784a98bc1cccb03535bc42f7f0fb_hu9569bb820aed3f9fb44d2a8c45252134_264385_250x150_fill_q75_box_smart1.jpeg width=250 height=150 loading=lazy data-key data-hash="md5-gbl4Spi8HMywNTW8Qvfw+w=="></div><div class=article-details><h2 class=article-title>å®¡è®¡ç›®å½•</h2></div></a></article><article class=has-image><a href=/posts/display-type-c/><div class=article-image><img src=/posts/display-type-c/physic-attack.3290fb7f3545722b1f1f052e38f35f7a_hu9224733f52b8c48201352fcf4d129bd0_19433_250x150_fill_q75_box_smart1.jpeg width=250 height=150 loading=lazy data-key data-hash="md5-MpD7fzVFcisfHwUuOPNfeg=="></div><div class=article-details><h2 class=article-title>è®°æ˜¾ç¤ºå™¨åäº†</h2></div></a></article><article class=has-image><a href=/posts/summary-of-2022/><div class=article-image><img src=/posts/summary-of-2022/abc.0bf98c0c1d32267804235515513751a1_huf65fe7975d9eacd17cf4d7a3d8ea4efd_84776_250x150_fill_q75_box_smart1.jpeg width=250 height=150 loading=lazy data-key data-hash="md5-C/mMDB0yJngEI1UVUTdRoQ=="></div><div class=article-details><h2 class=article-title>2022å¹´ç»ˆæ€»ç»“</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2006 -
2023 é¬¼ç”»æ¡ƒç¬¦</section><section class=powerby>è±†è…ç‚’ç³–</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#è§£å†³æ–¹æ¡ˆ>è§£å†³æ–¹æ¡ˆ</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>